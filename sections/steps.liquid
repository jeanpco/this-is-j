{%- if section.settings.heading != blank -%}
  <h2 class="steps__title" style="background-color: {{ section.settings.bg }};">
    {{ section.settings.heading }}
  </h2>
{%- endif -%}

<div class="steps__content" style="background-color: {{ section.settings.bg | color_lighten: 22 }};">
  <ol class="steps__list">
    {%- for block in section.blocks -%}
      <li class="step">
        <span class="step__count">{{ forloop.index }}</span>
        <h3 class="step__title">{{ block.settings.title }}</h3>
        <p>{{ block.settings.text }}</p>
      </li>
    {%- endfor -%}
  </ol>
</div>

<style>
  .steps__title {
    margin: 0;
    padding: 2rem 1rem;
    text-align: center;
  }

  .steps__content {
    padding: 2rem 0;
  }

  .steps__list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  @media only screen and (min-width: 769px) {
    .steps__list {
      display: flex;
      justify-content: center;
    }
  }

  .step {
    flex-basis: 100%;
    margin: 2rem 1rem;
    text-align: center;
  }

  .step__count {
    background: {{ section.settings.bg }};
    border-radius: 50%;
    color: #fff;
    display: inline-block;
    font-family: Cooper BT, serif;
    font-size: 1.2rem;
    font-weight: bold;
    line-height: 2.5rem;
    margin-bottom: 1rem;
    width: 2.5rem;
  }

  .step__title {
    font-family: unset;
    font-size: 1rem;
    font-weight: 600;
    margin: .5rem 0;
  }
</style>

{% schema %}
  {
    "name": "Steps",
    "class": "steps",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Your Title"
      },
      {
        "type": "color",
        "id": "bg",
        "label": "Background",
        "default": "#B5C7C5"
      }
    ],
    "blocks": [
      {
        "type": "step",
        "name": "Step",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "Step Title"
          },
          {
            "type": "text",
            "id": "text",
            "label": "Text",
            "default": "Step description."
          }
        ]
      }
    ]
  }
{% endschema %}